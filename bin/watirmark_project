#!/usr/bin/env ruby
$:<< File.dirname(__FILE__)
$:<< File.expand_path(File.dirname(__FILE__) + '/../svn')

require 'rubigen'
require 'rubigen/scripts/generate'
require 'svn_client'

#grab project name and path from cmd line args or env var
args = []
if File.dirname(__FILE__) =~ /\/hudson\/workspace\//
  args << ENV['PROJECT_PATH']
  args << ENV['PROJECT_NAME']
else
  args << ARGV[0]
  args << ARGV[1]
end

source = RubiGen::PathSource.new(:application,File.join(File.dirname(__FILE__), "../app_generators"))
RubiGen::Base.reset_sources
RubiGen::Base.append_sources source
RubiGen::Scripts::Generate.new.run(args, :generator => 'watirmark_project')

puts "using PATH:" + args[0] + " NAME:" + args[1]

svnc = SVNClient.new(args[0], args[1])
svnc.project_setup



