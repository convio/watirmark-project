#!/usr/bin/env ruby
$:<< File.dirname(__FILE__)
$:<< File.expand_path(File.dirname(__FILE__) + '/../svn')

require 'rubigen'
require 'rubigen/scripts/generate'
require 'svn_client'

source = RubiGen::PathSource.new(:application,File.join(File.dirname(__FILE__), "../app_generators"))
RubiGen::Base.reset_sources
RubiGen::Base.append_sources source
RubiGen::Scripts::Generate.new.run(ARGV, :generator => 'watirmark_project')

#grab project name and path from cmd line args or env var
project_path = nil
project_name = nil
if File.dirname(__FILE__) =~ /\/hudson\/workspace\//
  project_path = ENV['PROJECT_PATH']
  project_name = ENV['PROJECT_NAME']
else
  project_path = ARGV[0]
  project_name = ARGV[1]
end

if project_path == nil or project_name == nil
  raise ArguementError, "Please set project path and name"
end

puts "using PATH:" + project_path + " NAME:" + project_name

svnc = SVNClient.new(project_name, project_path)
svnc.project_setup



